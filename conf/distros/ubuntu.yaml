---
# Ubuntu 11.10+
platform_pattern: Ubuntu(.*)
name: ubuntu
packager_name: devstack.packaging.apt:AptPackager
commands:
    apache:
        restart: service apache2 restart
        settings:
            conf-link-target: /etc/apache2/sites-enabled/000-default
        start: service apache2 start
        status: service apache2 status
        stop: service apache2 stop
    git:
        checkout: git checkout
        clone: git clone
    iscsi:
        restart: service tgt restart
        start: service tgt start
        status: service tgt status
        stop: service tgt stop
    libvirt:
        restart: service libvirt-bin restart
        status: service libvirt-bin status
        # This is just used to check that libvirt will work with a given protocol
        verify: virsh -c %VIRT_PROTOCOL% uri
    mysql:
        # NOTE: we aren't stopping any sql injection...
        create_db: mysql --user=%USER% --password=%PASSWORD% -e 
                        "CREATE DATABASE %DB% CHARACTER SET %CHARACTER_SET%;"
        drop_db: mysql --user=%USER% --password=%PASSWORD% -e 
                 "DROP DATABASE IF EXISTS %DB%;"
        grant_all: mysql --user=%USER% --password=%PASSWORD% -e 
                   "GRANT ALL PRIVILEGES ON *.* TO '%USER%'@'%' IDENTIFIED BY '%PASSWORD%'; FLUSH PRIVILEGES;"
        restart: service mysql restart
        set_pwd: mysql --user=%USER% --password=%OLD_PASSWORD% -e 
                 "USE mysql;   UPDATE user SET password=PASSWORD('%NEW_PASSWORD%') WHERE User='%USER%'; FLUSH PRIVILEGES;"
        start: service mysql start
        status: service mysql status
        stop: service mysql stop
    pip: pip
    rabbit-mq:
        start: service rabbitmq-server start
        stop: service rabbitmq-server stop
        status: service rabbitmq-server status
        restart: service rabbitmq-server restart
        change_password: rabbitmqctl change_password guest
components:
    cinder-client:
        action_classes:
            install: anvil.components.cinder_client:CinderClientInstaller
            running: anvil.components.cinder_client:CinderClientRuntime
            uninstall: anvil.components.cinder_client:CinderClientUninstaller
    db:
        action_classes:
            install: anvil.distros.rhel:DBInstaller
            running: anvil.components.db:DBRuntime
            uninstall: anvil.components.db:DBUninstaller
    general:
        action_classes:
            install: anvil.components.pkglist:Installer
            running: anvil.components:EmptyRuntime
            uninstall: anvil.components.pkglist:Uninstaller
    glance:
        action_classes:
            install: anvil.components.glance:GlanceInstaller
            running: anvil.components.glance:GlanceRuntime
            uninstall: anvil.components.glance:GlanceUninstaller
    glance-client:
        action_classes:
            install: anvil.components.glance_client:GlanceClientInstaller
            running: anvil.components.glance_client:GlanceClientRuntime
            uninstall: anvil.components.glance_client:GlanceClientUninstaller
    horizon:
        action_classes:
            install: anvil.distros.rhel:HorizonInstaller
            running: anvil.components.horizon:HorizonRuntime
            uninstall: anvil.components.horizon:HorizonUninstaller
    keystone:
        action_classes:
            install: anvil.components.keystone:KeystoneInstaller
            running: anvil.components.keystone:KeystoneRuntime
            uninstall: anvil.components.keystone:KeystoneUninstaller
    keystone-client:
        action_classes:
            install: anvil.components.keystone_client:KeyStoneClientInstaller
            running: anvil.components.keystone_client:KeyStoneClientRuntime
            uninstall: anvil.components.keystone_client:KeyStoneClientUninstaller
    nova:
        action_classes:
            install: anvil.distros.rhel:NovaInstaller
            running: anvil.components.nova:NovaRuntime
            uninstall: anvil.components.nova:NovaUninstaller
    nova-client:
        action_classes:
            install: anvil.components.nova_client:NovaClientInstaller
            running: anvil.components.nova_client:NovaClientRuntime
            uninstall: anvil.components.nova_client:NovaClientUninstaller
    no-vnc:
        action_classes:
            install: anvil.components.novnc:NoVNCInstaller
            running: anvil.components.novnc:NoVNCRuntime
            uninstall: anvil.components.novnc:NoVNCUninstaller
    openstack-client:
        action_classes:
            install: anvil.components.openstack_client:OpenStackClientInstaller
            running: anvil.components.openstack_client:OpenStackClientRuntime
            uninstall: anvil.components.openstack_client:OpenStackClientUninstaller
    quantum-client:
        action_classes:
            install: anvil.components.quantum_client:QuantumClientInstaller
            running: anvil.components.quantum_client:QuantumClientRuntime
            uninstall: anvil.components.quantum_client:QuantumClientUninstaller
    rabbit-mq:
        action_classes:
            install: anvil.components.rabbit:RabbitInstaller
            running: anvil.distros.rhel:RabbitRuntime
            uninstall: anvil.components.rabbit:RabbitUninstaller
    swift-client:
        action_classes:
            install: anvil.components.swift_client:SwiftClientInstaller
            running: anvil.components.swift_client:SwiftClientRuntime
            uninstall: anvil.components.swift_client:SwiftClientUninstaller
...

