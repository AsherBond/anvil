# This is a extended json package definition file 
# We allow simple comments (lines starting with a hash symbol)
[
    # Tenants
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "tenant",
            "add",
            "admin"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "tenant",
            "add",
            "demo"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "tenant",
            "add",
            "invisible_to_admin"
        ]
    },
    # Users
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "user",
            "add",
            "admin",
            "%ADMIN_PASSWORD%"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "user",
            "add",
            "demo",
            "%ADMIN_PASSWORD%"
        ]
    },
    # Roles
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "add",
            "Admin"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "add",
            "Member"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "add",
            "KeystoneAdmin"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "add",
            "KeystoneServiceAdmin"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "add",
            "sysadmin"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "add",
            "netadmin"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "grant",
            "Admin",
            "admin",
            "admin"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "grant",
            "Member",
            "demo",
            "demo"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "grant",
            "sysadmin",
            "demo",
            "demo"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "grant",
            "netadmin",
            "demo",
            "demo"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "grant",
            "Member",
            "demo",
            "invisible_to_admin"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "grant",
            "Admin",
            "admin",
            "demo"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "grant",
            "Admin",
            "admin"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "grant",
            "KeystoneAdmin",
            "admin"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "role",
            "grant",
            "KeystoneServiceAdmin",
            "admin"
        ]
    },
    # Services
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "service",
            "add",
            "nova",
            "compute",
            "Nova Compute Service"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "service",
            "add",
            "ec2",
            "ec2",
            "EC2 Compatability Layer"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "service",
            "add",
            "glance",
            "image",
            "Glance Image Service"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "service",
            "add",
            "keystone",
            "identity",
            "Keystone Identity Service"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "service",
            "add",
            "swift",
            "object-store",
            "Swift Service"
        ]
    },
    # endpointTemplates
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "endpointTemplates",
            "add",
            "RegionOne",
            "nova",
            "http://%HOST_IP%:8774/v1.1/%tenant_id%",
            "http://%HOST_IP%:8774/v1.1/%tenant_id%",
            "http://%HOST_IP%:8774/v1.1/%tenant_id%",
            "1",
            "1"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "endpointTemplates",
            "add",
            "RegionOne",
            "ec2",
            "http://%HOST_IP%:8773/services/Cloud",
            "http://%HOST_IP%:8773/services/Admin",
            "http://%HOST_IP%:8773/services/Cloud",
            "1",
            "1"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "endpointTemplates",
            "add",
            "RegionOne",
            "glance",
            "http://%HOST_IP%:9292/v1.1/%tenant_id%",
            "http://%HOST_IP%:9292/v1.1/%tenant_id%",
            "http://%HOST_IP%:9292/v1.1/%tenant_id%",
            "1",
            "1"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "endpointTemplates",
            "add",
            "RegionOne",
            "keystone",
            "http://%HOST_IP%:5000/v2.0",
            "http://%HOST_IP%:35357/v2.0",
            "http://%HOST_IP%:5000/v2.0",
            "1",
            "1"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "endpointTemplates",
            "add",
            "RegionOne",
            "swift",
            "http://%HOST_IP%:8080/v1/AUTH_%tenant_id%",
            "http://%HOST_IP%:8080/",
            "http://%HOST_IP%:8080/v1/AUTH_%tenant_id%",
            "1",
            "1"
        ]
    },
    # Tokens
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "token",
            "add",
            "%SERVICE_TOKEN%",
            "admin",
            "admin",
            "2015-02-05T00:00"
        ]
    },
    # EC2 related creds - note we are setting the secret key to ADMIN_PASSWORD
    # but keystone doesn't parse them - it is just a blob from keystone's
    # point of view
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "credentials",
            "add",
            "admin",
            "EC2",
            "admin",
            "%ADMIN_PASSWORD%",
            "admin"
        ]
    },
    {
        "cmd": [
            "%BIN_DIR%/keystone-manage",
            "credentials",
            "add",
            "demo",
            "EC2",
            "demo",
            "%ADMIN_PASSWORD%",
            "demo"
        ]
    }
]
